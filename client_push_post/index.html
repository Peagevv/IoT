<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control Carro IoT - Denisse Moguel</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg custom-navbar">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-car-front-fill"></i> Control Carro IoT
            </a>
            <div class="navbar-nav ms-auto">
                <span class="navbar-text">
                    Estado: <span id="connectionStatus" class="badge custom-badge">Desconectado</span>
                </span>
            </div>
        </div>
    </nav>

    <!-- Contenido Principal -->
    <div class="container mt-4">
        <!-- Alertas -->
        <div id="alertsContainer"></div>

        <!-- Panel de Control -->
        <div class="row">
            <!-- Controles de Movimiento -->
            <div class="col-lg-8">
                <div class="card custom-card">
                    <div class="card-header custom-card-header-success">
                        <h4 class="mb-0">
                            <i class="bi bi-joystick"></i> Controles de Movimiento
                        </h4>
                    </div>
                    <div class="card-body">
                        <!-- Selector de Dispositivo -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label class="form-label"><strong>Seleccionar Carro:</strong></label>
                                <select id="deviceSelect" class="form-select custom-select">
                                    <option value="1">Carro_Principal</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label"><strong>Estado:</strong></label>
                                <div>
                                    <span id="connectionStatus" class="badge custom-badge">Desconectado</span>
                                </div>
                            </div>
                        </div>

                        <!-- Botones de Movimiento -->
                        <div class="text-center">
                            <!-- Fila: Adelante -->
                            <div class="mb-3">
                                <button class="btn custom-btn-primary movement-btn" data-operation="1">
                                    <i class="bi bi-arrow-up"></i><br>
                                    Adelante
                                </button>
                            </div>
                            
                            <!-- Fila: Izquierda - Detener - Derecha -->
                            <div class="mb-3">
                                <button class="btn custom-btn-warning movement-btn me-2" data-operation="8">
                                    <i class="bi bi-arrow-left"></i><br>
                                    Izquierda
                                </button>
                                
                                <button class="btn custom-btn-danger movement-btn me-2" data-operation="3">
                                    <i class="bi bi-stop-fill"></i><br>
                                    Detener
                                </button>
                                
                                <button class="btn custom-btn-warning movement-btn" data-operation="9">
                                    <i class="bi bi-arrow-right"></i><br>
                                    Derecha
                                </button>
                            </div>
                            
                            <!-- Fila: Atrás -->
                            <div class="mb-3">
                                <button class="btn custom-btn-primary movement-btn" data-operation="2">
                                    <i class="bi bi-arrow-down"></i><br>
                                    Atrás
                                </button>
                            </div>
                        </div>

                        <!-- Controles Avanzados -->
                        <div class="row mt-4">
                            <div class="col-md-4">
                                <button class="btn custom-btn-info movement-btn w-100" data-operation="4">
                                    <i class="bi bi-arrow-up-right"></i><br>
                                    Vuelta Der.
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn custom-btn-info movement-btn w-100" data-operation="5">
                                    <i class="bi bi-arrow-up-left"></i><br>
                                    Vuelta Izq.
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn custom-btn-secondary movement-btn w-100" data-operation="10">
                                    <i class="bi bi-arrow-clockwise"></i><br>
                                    Giro 360°
                                </button>
                            </div>
                        </div>

                        <!-- Controles Adicionales -->
                        <div class="row mt-3">
                            <div class="col-md-3">
                                <button class="btn custom-btn-info movement-btn w-100" data-operation="6">
                                    <i class="bi bi-arrow-down-right"></i><br>
                                    V. Atrás Der.
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn custom-btn-info movement-btn w-100" data-operation="7">
                                    <i class="bi bi-arrow-down-left"></i><br>
                                    V. Atrás Izq.
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn custom-btn-secondary movement-btn w-100" data-operation="11">
                                    <i class="bi bi-arrow-counterclockwise"></i><br>
                                    Giro 360° Izq.
                                </button>
                            </div>
                            <div class="col-md-3">
                                <button class="btn custom-btn-warning movement-btn w-100" data-operation="12">
                                    <i class="bi bi-star-fill"></i><br>
                                    Especial
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de Modos y Monitoreo -->
            <div class="col-lg-4">
                <!-- Modo Demo -->
                <div class="card custom-card">
                    <div class="card-header custom-card-header-info">
                        <h5 class="mb-0">
                            <i class="bi bi-play-circle"></i> Modos Automáticos
                        </h5>
                    </div>
                    <div class="card-body">
                        <button id="demoBtn" class="btn custom-btn-demo w-100 mb-2">
                            <i class="bi bi-robot"></i> Iniciar Demo
                        </button>
                        <button id="manageDemosBtn" class="btn custom-btn-secondary w-100 mb-2">
                            <i class="bi bi-gear"></i> Gestionar Demos
                        </button>
                        <button id="createDemoBtn" class="btn custom-btn-success w-100 mb-2">
                            <i class="bi bi-plus-circle"></i> Crear Nueva Demo
                        </button>
                        <button id="manageCarsBtn" class="btn custom-btn-warning w-100 mb-2">
                            <i class="bi bi-car-front"></i> Gestionar Carros
                        </button>
                        <button id="stopBtn" class="btn custom-btn-stop w-100">
                            <i class="bi bi-exclamation-triangle"></i> Parada Emergencia
                        </button>
                        <!-- Agregar esto en el panel de Modos Automáticos, después del botón de Parada Emergencia -->
<div class="card custom-card">
    <div class="card-header custom-card-header-info">
        <h5 class="mb-0">
            <i class="bi bi-play-circle"></i> Modos Automáticos
        </h5>
    </div>
    <div class="card-body">
        <button id="demoBtn" class="btn custom-btn-demo w-100 mb-2">
            <i class="bi bi-robot"></i> Iniciar Demo
        </button>
        <button id="manageDemosBtn" class="btn custom-btn-secondary w-100 mb-2">
            <i class="bi bi-gear"></i> Gestionar Demos
        </button>
        <button id="createDemoBtn" class="btn custom-btn-success w-100 mb-2">
            <i class="bi bi-plus-circle"></i> Crear Nueva Demo
        </button>
        <button id="manageCarsBtn" class="btn custom-btn-warning w-100 mb-2">
            <i class="bi bi-car-front"></i> Gestionar Carros
        </button>
        <button id="stopBtn" class="btn custom-btn-stop w-100 mb-2">
            <i class="bi bi-exclamation-triangle"></i> Parada Emergencia
        </button>
        
        <!-- NUEVO: Panel de Control WebSocket -->
        <div class="mt-3 p-3 bg-light rounded">
            <h6 class="text-purple mb-2">
                <i class="bi bi-wifi"></i> Conexión WebSocket
            </h6>
            <div class="d-flex justify-content-between align-items-center mb-2">
                <small>Estado:</small>
                <span id="connectionStatus" class="badge custom-badge">Desconectado</span>
            </div>
            <button id="reconnectBtn" class="btn custom-btn-info btn-sm w-100">
                <i class="bi bi-arrow-clockwise"></i> Reconectar
            </button>
        </div>
        
        <div class="mt-3">
            <small class="text-muted">
                Control en tiempo real via WebSocket - Comunicación bidireccional
            </small>
        </div>
    </div>
</div>

<!-- Agregar esta tarjeta nueva para datos de sensores en tiempo real -->
<div class="card custom-card mt-3">
    <div class="card-header custom-card-header-secondary">
        <h6 class="mb-0">
            <i class="bi bi-speedometer2"></i> Sensores en Tiempo Real
        </h6>
    </div>
    <div class="card-body">
        <div id="sensorDisplay" class="text-center">
            <div class="text-muted">
                <i class="bi bi-activity display-6"></i>
                <p class="mt-2">Esperando datos de sensores...</p>
                <small>Los datos aparecerán cuando el carro esté activo</small>
            </div>
        </div>
    </div>
</div>
                        <div class="mt-3">
                            <small class="text-muted">
                                Gestiona tus carros IoT y crea secuencias automáticas de movimientos.
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Log de Actividad -->
                <div class="card custom-card">
                    <div class="card-header custom-card-header-dark">
                        <h5 class="mb-0">
                            <i class="bi bi-list-check"></i> Log de Actividad
                        </h5>
                    </div>
                    <div class="card-body p-0">
                        <div id="wsMessages" class="custom-message-container">
                            <div class="text-center text-muted py-5">
                                <i class="bi bi-chat-square-text display-6"></i>
                                <p class="mt-2">Los mensajes aparecerán aquí</p>
                                <small class="text-muted">Conectando al servidor...</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Información del Sistema -->
                <div class="card custom-card">
                    <div class="card-header custom-card-header-secondary">
                        <h5 class="mb-0">
                            <i class="bi bi-info-circle"></i> Información del Sistema
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-6 mb-3">
                                <div class="p-3 bg-light rounded">
                                    <i class="bi bi-cpu display-6 text-purple"></i>
                                    <h6 class="mt-2 mb-0">AWS EC2</h6>
                                    <small class="text-muted">Backend</small>
                                </div>
                            </div>
                            <div class="col-6 mb-3">
                                <div class="p-3 bg-light rounded">
                                    <i class="bi bi-database display-6 text-purple"></i>
                                    <h6 class="mt-2 mb-0">AWS RDS</h6>
                                    <small class="text-muted">MySQL</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-3 bg-light rounded">
                                    <i class="bi bi-cloud display-6 text-purple"></i>
                                    <h6 class="mt-2 mb-0">GitHub</h6>
                                    <small class="text-muted">Pages</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="p-3 bg-light rounded">
                                    <i class="bi bi-wifi display-6 text-purple"></i>
                                    <h6 class="mt-2 mb-0">WebSocket</h6>
                                    <small class="text-muted">Tiempo Real</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Información de Operaciones -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card custom-card">
                    <div class="card-header custom-card-header-secondary">
                        <h5 class="mb-0">
                            <i class="bi bi-info-circle"></i> Referencia de Operaciones
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <strong class="text-purple">Básicos:</strong>
                                <ul class="list-unstyled mt-2">
                                    <li><span class="badge bg-primary me-2">1</span> Adelante</li>
                                    <li><span class="badge bg-primary me-2">2</span> Atrás</li>
                                    <li><span class="badge bg-danger me-2">3</span> Detener</li>
                                </ul>
                            </div>
                            <div class="col-md-3">
                                <strong class="text-purple">Giros:</strong>
                                <ul class="list-unstyled mt-2">
                                    <li><span class="badge bg-warning me-2">8</span> Giro 90° derecha</li>
                                    <li><span class="badge bg-warning me-2">9</span> Giro 90° izquierda</li>
                                    <li><span class="badge bg-secondary me-2">10</span> Giro 360° derecha</li>
                                    <li><span class="badge bg-secondary me-2">11</span> Giro 360° izquierda</li>
                                </ul>
                            </div>
                            <div class="col-md-3">
                                <strong class="text-purple">Vueltas:</strong>
                                <ul class="list-unstyled mt-2">
                                    <li><span class="badge bg-info me-2">4</span> Vuelta adelante derecha</li>
                                    <li><span class="badge bg-info me-2">5</span> Vuelta adelante izquierda</li>
                                    <li><span class="badge bg-info me-2">6</span> Vuelta atrás derecha</li>
                                    <li><span class="badge bg-info me-2">7</span> Vuelta atrás izquierda</li>
                                </ul>
                            </div>
                            <div class="col-md-3">
                                <strong class="text-purple">Características:</strong>
                                <ul class="list-unstyled mt-2">
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Control en tiempo real</li>
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Múltiples dispositivos</li>
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Secuencias programables</li>
                                    <li><i class="bi bi-check-circle text-success me-2"></i>Monitoreo continuo</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Estadísticas en Tiempo Real -->
        <div class="row mt-4">
            <div class="col-md-3">
                <div class="card custom-card text-center">
                    <div class="card-body">
                        <i class="bi bi-lightning-charge display-6 text-warning"></i>
                        <h4 class="mt-2" id="commandsCount">0</h4>
                        <p class="mb-0 text-muted">Comandos Enviados</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card custom-card text-center">
                    <div class="card-body">
                        <i class="bi bi-clock display-6 text-info"></i>
                        <h4 class="mt-2" id="uptimeCounter">0s</h4>
                        <p class="mb-0 text-muted">Tiempo Activo</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card custom-card text-center">
                    <div class="card-body">
                        <i class="bi bi-robot display-6 text-success"></i>
                        <h4 class="mt-2" id="demosCount">2</h4>
                        <p class="mb-0 text-muted">Demos Disponibles</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card custom-card text-center">
                    <div class="card-body">
                        <i class="bi bi-shield-check display-6 text-primary"></i>
                        <h4 class="mt-2" id="statusIndicator">Online</h4>
                        <p class="mb-0 text-muted">Estado del Sistema</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="custom-footer mt-5">
        <div class="container py-4">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h5 class="mb-2">Denisse Moguel</h5>
                    <p class="mb-1">
                        <i class="bi bi-laptop"></i> Control Carro IoT - Sistema de Control en Tiempo Real
                    </p>
                    <p class="mb-0">
                        <i class="bi bi-mortarboard"></i> Proyecto de Arquitectura IoT
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-2"><strong>Tecnologías Implementadas:</strong></p>
                    <div class="tech-badges">
                        <span class="badge custom-badge me-1">AWS EC2</span>
                        <span class="badge custom-badge me-1">AWS RDS</span>
                        <span class="badge custom-badge me-1">Flask</span>
                        <span class="badge custom-badge me-1">WebSocket</span>
                        <span class="badge custom-badge me-1">Bootstrap 5</span>
                        <span class="badge custom-badge me-1">JavaScript</span>
                        <span class="badge custom-badge">GitHub Pages</span>
                    </div>
                </div>
            </div>
            <hr class="my-3">
            <div class="row">
                <div class="col-md-8">
                    <p class="mb-0">
                        <i class="bi bi-github"></i> Repositorio: 
                        <a href="https://github.com/Peagevv/IoT" class="text-purple" target="_blank">github.com/Peagevv/IoT</a>
                    </p>
                </div>
                <div class="col-md-4 text-md-end">
                    <p class="mb-0">
                        <i class="bi bi-server"></i> Backend: 
                        <span class="text-purple">98.91.159.217:5500</span>
                    </p>
                </div>
            </div>
            <div class="text-center mt-3">
                <p class="mb-0">&copy; 2025 Denisse Moguel. Todos los derechos reservados.</p>
                <small class="text-muted">Sistema IoT desarrollado para el control y monitoreo de dispositivos en tiempo real</small>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Aplicación JavaScript -->
    <script src="js/app.js"></script>
</body>
</html>